<style>
  /* スタイルの定義 */
  .table-container {
    display: flex;
  }

  .item-table {
    flex: 2;
  }

  .price-table {
    flex: 1;
    margin-left: 20px;
  }

</style>

<h2 style="color: #666;">注文情報確認</h2>

<!-- 注文内容の表示 -->
<div class="table-container">
  <table class="table table-bordered border-dark item-table">
    <thead class="table-light">
      <tr>
        <th>商品名</th>
        <th class="text-right">単価(税込)</th>
        <th class="text-right">数量</th>
        <th class="text-right">小計</th>
      </tr>
    </thead>
    <tbody>
      <% current_customer.cart_items.each do |cart_item| %>
        <tr>
          <td><%= cart_item.item.name %></td>
          <td class="text-right"><%= cart_item.item.with_tax_price %>円</td>
          <td class="text-right"><%= cart_item.amount %></td>
          <td class="text-right"><%= cart_item.subtotal_price %>円</td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- 送料や合計金額を表として表示 -->
  <table class="table table-bordered border-dark price-table">
    <tbody>
      <tr>
        <td colspan="2">送料：</td>
        <td class="text-right"><%= @order.postage %></td>
      </tr>
      <tr>
        <td colspan="2">商品合計：</td>
        <td class="text-right"><%= @order.total_amount %></td>
      </tr>
      <tr>
        <td colspan="2">請求金額：</td>
        <td class="text-right"><%= @order.total_amount + @order.postage %></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- 支払方法の表示 -->
<h2 style="color: black; font-size: 1.2rem;">支払方法</h2>
<p style="color: black; font-size: 1rem;"><%= @order.payment_method %></p>

<!-- お届け先の表示 -->
<h2 style="color: #666;">お届け先</h2>
<% if @order.selection_address == 0 %>
  <%= current_customer.address %>
<% elsif @order.selection_address == 1 %>
  <% if @shipping_addresses.present? %>
    <%= @shipping_addresses.find(@order.shipping_address_id).address_display %>
  <% else %>
    登録されていません。
  <% end %>
<% elsif @order.selection_address == 2 %>
  <!-- 新しいお届け先のフォームを表示 -->
  <div>
    <h4 class="font-weight-bold">郵便番号（ハイフンなし）</h4>
    <%= @order.postcode %>
  </div>
  <div>
    <h4 class="font-weight-bold">住所</h4>
    <%= @order.address %>
  </div>
  <div>
    <h4 class="font-weight-bold">宛名</h4>
    <%= @order.name %>
  </div>
<% end %>
</div>

<!-- 注文を確定するボタン -->
<%= button_to "注文を確定する", orders_complete_order_path, method: :patch, class: "btn btn-primary" %>
